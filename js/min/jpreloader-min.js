!function($){var e=new Array,t=new Array,n=function(){},o=0,i={splashVPos:"35%",loaderVPos:"75%",splashID:"#jpreContent",showSplash:!0,showPercentage:!0,autoClose:!0,closeBtnText:"Start!",onetimeLoad:!1,debugMode:!1,splashFunction:function(){}},a=function(){if(i.onetimeLoad){for(var e=document.cookie.split("; "),t=0,n;n=e[t]&&e[t].split("=");t++)if("jpreLoader"===n.shift())return n.join("=");return!1}return!1},r=function(e){if(i.onetimeLoad){var t=new Date;t.setDate(t.getDate()+e);var n=null==e?"":"expires="+t.toUTCString();document.cookie="jpreLoader=loaded; "+n}},d=function(){if(jOverlay=$("<div></div>").attr("id","jpreOverlay").css({position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:9999999}).appendTo("body"),i.showSplash){jContent=$("<div></div>").attr("id","jpreSlide").appendTo(jOverlay);var e=$(window).width()-$(jContent).width();$(jContent).css({position:"absolute",top:i.splashVPos,left:Math.round(50/$(window).width()*e)+"%"}),$(jContent).html($(i.splashID).wrap("<div/>").parent().html()),$(i.splashID).remove(),i.splashFunction()}jLoader=$("<div></div>").attr("id","jpreLoader").appendTo(jOverlay);var t=$(window).width()-$(jLoader).width();$(jLoader).css({position:"absolute",top:i.loaderVPos,left:Math.round(50/$(window).width()*t)+"%"}),jBar=$("<div></div>").attr("id","jpreBar").css({width:"0%",height:"100%"}).appendTo(jLoader),i.showPercentage&&(jPer=$("<div></div>").attr("id","jprePercentage").css({position:"relative",height:"100%"}).appendTo(jLoader).html("Loading...")),i.autoclose||(jButton=$("<div></div>").attr("id","jpreButton").on("click",function(){u()}).css({position:"relative",height:"100%"}).appendTo(jLoader).text(i.closeBtnText).hide())},s=function(t){$(t).find("*:not(script)").each(function(){var t="";if(-1==$(this).css("background-image").indexOf("none")&&-1==$(this).css("background-image").indexOf("-gradient")){if(t=$(this).css("background-image"),-1!=t.indexOf("url")){var n=t.match(/url\((.*?)\)/);t=n[1].replace(/\"/g,"")}}else"img"==$(this).get(0).nodeName.toLowerCase()&&"undefined"!=typeof $(this).attr("src")&&(t=$(this).attr("src"));t.length>0&&e.push(t)})},h=function(){for(var t=0;t<e.length;t++)c(e[t])},c=function(e){var n=new Image;$(n).load(function(){l()}).error(function(){t.push($(this).attr("src")),l()}).attr("src",e)},l=function(){o++;var t=Math.round(o/e.length*100);if($(jBar).stop().animate({width:t+"%"},500,"linear"),i.showPercentage&&$(jPer).text(t+"%"),o>=e.length){if(o=e.length,r(),i.showPercentage&&$(jPer).text("100%"),i.debugMode)var n=p();$(jBar).stop().animate({width:"100%"},500,"linear",function(){i.autoClose?u():$(jButton).fadeIn(1e3)})}},u=function(){$(jOverlay).fadeOut(800,function(){$(jOverlay).remove(),n()}),$("body").addClass("loaded")},p=function(){if(t.length>0){var e="ERROR - IMAGE FILES MISSING!!!\n\r";e+=t.length+" image files cound not be found. \n\r",e+="Please check your image paths and filenames:\n\r";for(var n=0;n<t.length;n++)e+="- "+t[n]+"\n\r";return!0}return!1};$.fn.jpreLoader=function(e,t){return e&&$.extend(i,e),"function"==typeof t&&(n=t),$("body").css({display:"block"}),this.each(function(){a()?($(i.splashID).remove(),n()):(d(),s(this),h())})}}(jQuery);